# 스프링 AOP - 실무 주의사항

### TL;DR

### 주의사항 1 : SpringAOP는 내부 호출에 프록시 적용 불가

[ 사전 지식 ]

- SpringAOP는 RuntimeWeaving의 Proxy방식 AOP이용.
- 따라서 AOP를 적용키 위해서는 당연히 Proxy객체를 통해야 한다.
- 또한, SpringAOP적용시, 스프링은 `target 대신 proxy`를 빈으로 등록하며,
- DI도 `proxy`를 주입해주기에 일반상황에서 `target`객체를 직접 호출하는 문제는 발생치 않는다.

[ Problem ]

- `target 객체` 내부에서 자기자신의 내부 메서드 호출시, 당연하지만 AOP는 동작하지 않는다.
- Proxy객체를 통하지 않고 `target`내에서 `target`내부 메서드 호출하기 때문이다.
- Q. AspectJ에서도 동일 문제 발생할까?
  - A. NOPE. 
    - 애초에 프록시 방식이 아닌, 바이트코드 조작방식으로 해당 코드에 직접 AOP적용코드가 추가적으로 작성. 
    - 따라서 내부 메서드 호출과 무관하게 AOP적용 가능.

[ Solution ]
- 대안1 : 자기 자신 주입 
- 대안2 : 지연 조회
- 대안3 : 구조 변경

### 주의사항 2: 프록시 기술의 한계

[ 타입 캐스팅 ] 

[ 의존관계 주입 ] 

[ CGLIB ] 

[ 스프링의 해결책 ] 
